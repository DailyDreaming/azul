version: '2'

services:
    dcc-dashboard-service:
      build: ../
      environment:
        APACHE_PATH: ""
        ES_SERVICE: "elasticsearch"
        FLASK_APP: "/app/mapi.py"
      networks:
        - server
      restart: always

    boardwalk:
      image: quay.io/ucsc_cgl/boardwalk:1.0.0
      environment:
        BOARDWALK_HOST: "localhost"
      networks:
        - server
      ports:
        - "80:80"
        - "443:443"
        - "3000:3000"
      restart: always

    elasticsearch:
      ports:
        - "9200"
      environment:
        - xpack.security.enabled=false
      networks:
        - server

networks:
  server:
    driver: local